const TabPersosRecherche = [
    { prenom: "Gon", nom: "Freecss", image: "../Personnages/kirua.webp" },
    { prenom: "Kirua", nom: "Zoldik", image: "../Personnages/kirua.webp" },
    { prenom: "Kurapika", nom: "", image: "../Personnages/kurapika.jpg" },
    { prenom: "Leolio", nom: "Paradinaito", image: "../Personnages/leolio.webp" },
    // Examen Hunter
    { prenom: "Hisoka", nom: "Morow", image: "../Personnages/hisoka.webp" },
    { prenom: "Irumi", nom: "Zoldik", image: "../Personnages/irumi.jpg", hatsu: "Dance of the Serpent's Bite" },
    { prenom: "Isaac", nom: "Netero", image: "../Personnages/netero.jpg" },
    // Famille Zoldik
    { prenom: "Silva", nom: "Zoldik", image: "../Personnages/silva.jpg" },
    { prenom: "Zeno", nom: "Zoldik", image: "../Personnages/zeno.jpg", hatsu: "Dragon Lance" },
    { prenom: "Karuto", nom: "Zoldik", image: "../Personnages/karuto.webp" },
    { prenom: "Aruka", nom: "Zoldik", image: "../Personnages/aruka.jpg" },
    // York Shin City
    { prenom: "Kuroro", nom: "Lucifer", image: "../Personnages/kuroro.png", hatsu: "Skill Hunter" },
    { prenom: "Nobunaga", nom: "Hazama", image: "../Personnages/nobu.jpg" },
    { prenom: "Feitan", nom: "Portor", image: "../Personnages/feitan.jpg", hatsu: "Pain Packer" },
    { prenom: "Machi", nom: "Komachine", image: "../Personnages/machi.jpg" },
    { prenom: "Phinks", nom: "Magkav", image: "../Personnages/phinks.jpg", hatsu: "Ripper Cyclotron" },
    { prenom: "Sharnalk", nom: "Ryusei", image: "../Personnages/sharnalk.jpg", hatsu: "" },
    { prenom: "Franklin", nom: "Bordeaux", image: "../Personnages/franklin.jpg", hatsu: "" },
    { prenom: "Shizuku", nom: "Murasaki", image: "../Personnages/shizuku.webp", hatsu: "Démé-Chan" },
    { prenom: "Pakunoda", nom: "", image: "../Personnages/pakunoda.webp", hatsu: "Memory  Bullets" },
    { prenom: "Bonorenof", nom: "Ndongo", image: "../Personnages/bono.webp", hatsu: "Battle Cantabile : "},
    { prenom: "Uvoguine", nom: "", image: "../Personnages/uvoguine.jpeg", hatsu: "Big Bang Impact" },
    { prenom: "Korutopi", nom: "", image: "../Personnages/korutopi.jpg", hatsu: "Gallery Fake" },
    // Greed Island
    { prenom: "Biscuit", nom: "Kruger", image: "../Personnages/biscuit.png", hatsu: "Magical Esthe" },
    { prenom: "Genthru", nom: "", image: "../Personnages/genthru.jpg", hatsu: "Little Flower" },
    { prenom: "Rasor", nom: "", image: "../Personnages/rasor.webp" },
    // Kimera Ants
    { prenom: "Kaito", nom: "", image: "../Personnages/kaito.jpg", hatsu: "Crazy Slot" },
    { prenom: "Meruem", nom: "", image: "../Personnages/meruem.jpg", hatsu: "Nen Eater" },
    { prenom: "Neferupito", nom: "", image: "../Personnages/neferupito.jpg", hatsu: "Doctor Blythe" },
    { prenom: "Montutyupi", nom: "", image: "../Personnages/montutyupi.jpg" },
    { prenom: "Shauapufu", nom: "", image: "../Personnages/shauapufu.jpg", hatsu: "Beelzebuth" },
    { prenom: "Komugi", nom: "", image: "../Personnages/komugi.jpg" },
    { prenom: "Jairo", nom: "", image: "../Personnages/jairo.jpg" },
    { prenom: "Meleoron", nom: "", image: "../Personnages/meleoron.jpg" },
    { prenom: "Koruto", nom: "", image: "../Personnages/koruto.jpg" },
    { prenom: "Djido", nom: "", image: "../Personnages/djido.jpg" },
    { prenom: "Zazan", nom: "", image: "../Personnages/zazan.jpg", hatsu: "Queen Shot" },
    { prenom: "Leoru", nom:"", image: "../Personnages/leoru.jpg"},
    { prenom: "Werefin", nom:"", image: "../Personnages/leoru.jpg"},
    { prenom: "Ikarugo", nom:"", image: "../Personnages/leoru.jpg"},
    { prenom: "Morau", nom: "McCarnathy", image: "../Personnages/morau.jpg" },
    { prenom: "Nov", nom: "", image: "../Personnages/nov.jpg" },
    { prenom: "Knuckle", nom: "Bine", image: "../Personnages/knuckle.jpg" },
    { prenom: "Shoot", nom: "MacMahon", image: "../Personnages/shoot.jpg" },
    { prenom: "Pamu", nom: "Shiberia", image: "../Personnages/pamu.jpg" },
    // Elections
    { prenom: "Ging", nom: "Freecss", image: "../Personnages/ging.jpg" },
    { prenom: "Pariston", nom: "Hill", image: "../Personnages/pariston.jpg" }
];

const TabPersosHatsu = [
    { prenom: "Gon", nom: "Freecss", image: "../Personnages/kirua.webp" },
    { prenom: "Kirua", nom: "Zoldik", image: "../Personnages/kirua.webp" },
    { prenom: "Kurapika", nom: "", image: "../Personnages/kurapika.jpg" },
    { prenom: "Leolio", nom: "Paradinaito", image: "../Personnages/leolio.webp" },
    // Examen Hunter
    { prenom: "Hisoka", nom: "Morow", image: "../Personnages/hisoka.webp" },
    { prenom: "Irumi", nom: "Zoldik", image: "../Personnages/irumi.jpg", hatsu: "Needlemen" },
    { prenom: "Isaac", nom: "Netero", image: "../Personnages/netero.jpg" },
    // Famille Zoldik
    { prenom: "Silva", nom: "Zoldik", image: "../Personnages/silva.jpg" },
    { prenom: "Zeno", nom: "Zoldik", image: "../Personnages/zeno.jpg", hatsu: "Dragon Lance" },
    { prenom: "Karuto", nom: "Zoldik", image: "../Personnages/karuto.webp" },
    { prenom: "Aruka", nom: "Zoldik", image: "../Personnages/aruka.jpg" },
    // York Shin City
    { prenom: "Kuroro", nom: "Lucifer", image: "../Personnages/kuroro.png", hatsu: "Skill Hunter" },
    { prenom: "Nobunaga", nom: "Hazama", image: "../Personnages/nobu.jpg" },
    { prenom: "Feitan", nom: "Portor", image: "../Personnages/feitan.jpg", hatsu: "Pain Packer" },
    { prenom: "Machi", nom: "Komachine", image: "../Personnages/machi.jpg" },
    { prenom: "Phinks", nom: "Magkav", image: "../Personnages/phinks.jpg", hatsu: "Ripper Cyclotron" },
    { prenom: "Sharnalk", nom: "Ryusei", image: "../Personnages/sharnalk.jpg", hatsu: "" },
    { prenom: "Franklin", nom: "Bordeaux", image: "../Personnages/franklin.jpg", hatsu: "" },
    { prenom: "Shizuku", nom: "Murasaki", image: "../Personnages/shizuku.webp", hatsu: "Démé-Chan" },
    { prenom: "Pakunoda", nom: "", image: "../Personnages/pakunoda.webp", hatsu: "Memory  Bullets" },
    { prenom: "Bonorenof", nom: "Ndongo", image: "../Personnages/bono.webp", hatsu: "Battle Cantabile : "},
    { prenom: "Uvoguine", nom: "", image: "../Personnages/uvoguine.jpeg", hatsu: "Big Bang Impact" },
    { prenom: "Korutopi", nom: "", image: "../Personnages/korutopi.jpg", hatsu: "Gallery Fake" },
    // Greed Island
    { prenom: "Biscuit", nom: "Kruger", image: "../Personnages/biscuit.png", hatsu: "Magical Esthe" },
    { prenom: "Genthru", nom: "", image: "../Personnages/genthru.jpg", hatsu: "Little Flower" },
    { prenom: "Rasor", nom: "", image: "../Personnages/rasor.webp" },
    // Kimera Ants
    { prenom: "Kaito", nom: "", image: "../Personnages/kaito.jpg", hatsu: "Crazy Slot" },
    { prenom: "Meruem", nom: "", image: "../Personnages/meruem.jpg", hatsu: "Nen Eater" },
    { prenom: "Neferupito", nom: "", image: "../Personnages/neferupito.jpg", hatsu: "Doctor Blythe" },
    { prenom: "Montutyupi", nom: "", image: "../Personnages/montutyupi.jpg" },
    { prenom: "Shauapufu", nom: "", image: "../Personnages/shauapufu.jpg", hatsu: "Beelzebuth" },
    { prenom: "Komugi", nom: "", image: "../Personnages/komugi.jpg" },
    { prenom: "Jairo", nom: "", image: "../Personnages/jairo.jpg" },
    { prenom: "Meleoron", nom: "", image: "../Personnages/meleoron.jpg" },
    { prenom: "Koruto", nom: "", image: "../Personnages/koruto.jpg" },
    { prenom: "Djido", nom: "", image: "../Personnages/djido.jpg" },
    { prenom: "Zazan", nom: "", image: "../Personnages/zazan.jpg", hatsu: "Queen Shot" },
    { prenom: "Leoru", nom:"", image: "../Personnages/leoru.jpg"},
    { prenom: "Werefin", nom:"", image: "../Personnages/leoru.jpg"},
    { prenom: "Ikarugo", nom:"", image: "../Personnages/leoru.jpg"},
    { prenom: "Morau", nom: "McCarnathy", image: "../Personnages/morau.jpg" },
    { prenom: "Nov", nom: "", image: "../Personnages/nov.jpg" },
    { prenom: "Knuckle", nom: "Bine", image: "../Personnages/knuckle.jpg" },
    { prenom: "Shoot", nom: "MacMahon", image: "../Personnages/shoot.jpg" },
    { prenom: "Pamu", nom: "Shiberia", image: "../Personnages/pamu.jpg" },
    // Elections
    { prenom: "Ging", nom: "Freecss", image: "../Personnages/ging.jpg" },
    { prenom: "Pariston", nom: "Hill", image: "../Personnages/pariston.jpg" }
];

const inputSearch = document.querySelector('.input-recherche');
const suggestionSearch = document.querySelector(".suggestion-recherche");
const comparaison = document.querySelector(".comparaison");
const persoADeviner = TabPersosHatsu[Math.floor(Math.random() * TabPersosHatsu.length)];
let persoPropose = null;

// Affichage du hatsu 
const t2Element = document.querySelector('.consigne-t2');
if (t2Element) {
    t2Element.textContent = `" ${persoADeviner.hatsu} "`;
}


function afficherSuggestion(PersonnagesFiltre) {
  suggestionSearch.innerHTML = ""; // Réinitialiser les suggestions
  
  PersonnagesFiltre.forEach((perso) => {
    // Création de l'élément
    const item = document.createElement("button");
    item.classList.add("suggestion-item");
    item.innerHTML = `<img class="suggestion-item-img" src="${perso.image}">
                      <span>${perso.prenom}</span>
                      <span>&nbsp;${perso.nom}</span>`;
  
    // Ajout dans le DOM
    suggestionSearch.appendChild(item);
  
    // Suppression dans suggestion-recherche + TabPersosRecherche
    item.addEventListener("click", () => {
      // Trouver le personnage correspondant
      persoPropose = TabPersosHatsu.find(p => p.prenom === perso.prenom);
      
      if (persoPropose) {
        // Supprimer le personnage de TabPersosRecherche
        const index = TabPersosRecherche.findIndex(p => p.prenom === perso.prenom);
        if (index !== -1) {
            TabPersosRecherche.splice(index, 1);
        }
        item.remove();
      }
    }) 
  })
}
  
inputSearch.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
        const premierItem = document.querySelector(".suggestion-item");
        if (premierItem) {
            premierItem.click();
        }
    }
})
  
inputSearch.addEventListener("input", () => {
    const requete = inputSearch.value.toLowerCase().trim();
  
    if (requete === "") {
        afficherSuggestion([]); // Cacher les suggestions si recherche vide
        return;
    }
  
    const filtre = TabPersosRecherche.filter((perso) => {
        const prenom = perso.prenom.toLowerCase();
        const nom = perso.nom.toLowerCase();
        return prenom.startsWith(requete) || nom.startsWith(requete);
    });
  
    suggestionSearch.style.display = filtre.length > 0 ? "block" : "none";
    afficherSuggestion(filtre);
});
  
function afficherComparaison(persoPropose, persoADeviner) {
    let couleur = persoPropose.prenom === persoADeviner.prenom ? "green" : "red";

    let tableauHTML = `
        <div class="comparaison-item" style="background-color: ${couleur}; box-shadow: 0 1px 15px ${couleur}, inset 0 0 10px rgba(255, 255, 255, 0.47)">
            <img class="comparaison-img" src="${persoPropose.image}"> 
            <span class="comparaison-text" >${persoPropose.prenom} ${persoPropose.nom}</span>
        </div>`;
  
  // Insérer le tableau dans le DOM
  comparaison.innerHTML = tableauHTML + comparaison.innerHTML;
}
  
function Victoire() {
    inputSearch.disabled = true; // Désactiver l'input pour bloquer le jeu
  
    // Créer un message de victoire
    const conteneur = document.querySelector('.conteneur3');
    const messageVictoire = document.querySelector('.victoire');
    conteneur.style.display = "block";
    // Ajouter le texte principal
    const textePrincipal = document.createElement('p');
    textePrincipal.textContent = "Il est trop chaud ! 🎉";
    textePrincipal.classList.add('victoire-t1');
  
    // Ajouter le message secondaire (t2)
    const messageRejouer = document.createElement('p');
    messageRejouer.textContent = "Pour rejouer, il suffit juste d'actualiser la page.";
    messageRejouer.classList.add('victoire-t2');
  
    // Ajouter les deux messages à la même div
    messageVictoire.appendChild(textePrincipal);
    messageVictoire.appendChild(messageRejouer);
    conteneur.appendChlid(messageVictoire);
  
}
  
// Gestionnaire d'événements sur le conteneur parent
suggestionSearch.addEventListener("click", (e) => {
    // Vérifie si l'élément cliqué est un élément .suggestion-item ou contenu dans un tel élément
    const item = e.target.closest(".suggestion-item");
    if (!item) return; // Si ce n'est pas un élément .suggestion-item, on ignore l'événement
    
    // Récupère le prénom et le nom depuis l'élément cliqué
    const prenom = item.querySelector("span:nth-child(2)").textContent.trim().toLowerCase();
    
    // Trouve le personnage correspondant
    persoPropose = TabPersosHatsu.find(perso => perso.prenom.toLowerCase() === prenom);
    if (persoPropose) {
        afficherComparaison(persoPropose, persoADeviner);
        document.querySelector(".comparaison-item").style.animation = "none";
        inputSearch.value = "";
        inputSearch.focus();
        if (persoPropose.prenom === persoADeviner.prenom) {
            setTimeout(() => {
                Victoire(); // Appel de la fonction après 2 secondes
            }, 50); // Délai de 2000 ms (2 secondes)
        }
    }
})

  // Gestion de l'entrée utilisateur
   // const inputElement = document.querySelector('.input-recherche');
   // inputElement.addEventListener('input', () => {
      //  const userInput = inputElement.value.trim().toLowerCase();
        //const correctName = persoADeviner.prenom.toLowerCase();
    
       // if (userInput === correctName) {
        // Réponse correcte : ajoute une classe "correct"
        //inputElement.classList.remove('incorrect');
       // inputElement.classList.add('correct');
        //} else {
        // Réponse incorrecte : ajoute une classe "incorrect"
        //inputElement.classList.remove('correct');
        //inputElement.classList.add('incorrect');
       // }
    //});